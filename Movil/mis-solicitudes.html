<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLANASA GMAO - Mis Solicitudes</title>
    <link rel="stylesheet" href="mis-solicitudes.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="navbar-container"></div>

    <div class="container">


        <div class="filters-section">
            <div class="filter-group">
                <label for="importancia-filter">Importancia:</label>
                <select id="importancia-filter" onchange="filtrarSolicitudes()">
                    <option value="todas">Todas</option>
                    <option value="alta">Alta</option>
                    <option value="media">Media</option>
                    <option value="baja">Baja</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="tipo-filter">Tipo Mantenimiento:</label>
                <select id="tipo-filter" onchange="filtrarSolicitudes()">
                    <option value="todos">Todos</option>
                    <option value="Mantenimiento Preventivo">Preventivo</option>
                    <option value="Mantenimiento Correctivo">Correctivo</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="activo-filter">Tipo Activo:</label>
                <select id="activo-filter" onchange="filtrarSolicitudes()">
                    <option value="todos">Todos</option>
                    <option value="Tractor">Tractor</option>
                    <option value="Pulverizador">Pulverizador</option>
                    <option value="Cosechadora">Cosechadora</option>
                    <option value="Sistema de Riego">Sistema de Riego</option>
                    <option value="Generador">Generador</option>
                    <option value="Bomba">Bomba</option>
                    <option value="Cultivador">Cultivador</option>
                </select>
            </div>
        </div>

        <div class="solicitudes-container" id="solicitudes-lista">
            <!-- Las solicitudes se cargarán dinámicamente -->
        </div>

    </div>

    <!-- Modal para ver detalles de solicitud -->
    <div id="modal-detalle" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-titulo">Detalle de Solicitud</h2>
                <button class="modal-close" onclick="cerrarModal()">&times;</button>
            </div>
            <div id="modal-contenido">
                <!-- El contenido se carga dinámicamente -->
            </div>
        </div>
    </div>


                    
                    <div class="fila-resumen editable" id="fila-fechas" style="display: none;" onclick="editarPaso(2)">
                        <div class="fila-numero">2</div>
                        <div class="fila-contenido">
                            <div class="fila-titulo">Fechas programadas</div>
                            <div class="fila-valor" id="valor-fechas"></div>
                        </div>
                        <div class="fila-acciones">
                            <div class="fila-check">✓</div>
                            <div class="fila-editar">✏️</div>
                        </div>
                    </div>
                    
                    <div class="fila-resumen editable" id="fila-responsable" style="display: none;" onclick="editarPaso(3)">
                        <div class="fila-numero">3</div>
                        <div class="fila-contenido">
                            <div class="fila-titulo">Técnico asignado</div>
                            <div class="fila-valor" id="valor-responsable"></div>
                        </div>
                        <div class="fila-acciones">
                            <div class="fila-check">✓</div>
                            <div class="fila-editar">✏️</div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <script src="mis-solicitudes.js"></script>
    <script>
        // Cargar navbar
        fetch('../Components/navbar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navbar-container').innerHTML = html;
                // Actualizar el título del navbar para móvil
                const navbarTitle = document.querySelector('.navbar-title');
                if (navbarTitle) {
                    navbarTitle.textContent = 'Mis Solicitudes';
                }
                // Mostrar el botón de volver después de cargar el navbar
                setTimeout(() => {
                    const btnVolver = document.getElementById('btn-volver-nav');
                    if (btnVolver) {
                        btnVolver.classList.add('show');
                    }
                }, 100);
            })
            .catch(error => {
                console.error('Error cargando navbar:', error);
            });
    </script>
</body>
</html>