<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GMAO Planasa ‚Äì Gesti√≥n MO</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <main>
    <header>
      <!-- Barra superior con logo -->
      <div class="top-bar">
        <div class="brand-logo">
          <div class="logo"></div>
          PLANASA GMAO
        </div>
      </div>
      
      <!-- Incluir componente navbar -->
      <div id="navbar-container"></div>
    </header>

    <!-- Panel de filtros mejorado -->
    <div class="filters-panel">
      <div class="filters-section">
        <h3 class="filters-title">üîç Filtros</h3>
        <div class="filters-grid">
          <div class="filter-group">
            <label class="filter-label">Estado</label>
            <select id="statusFilter" class="filter-select">
              <option value="">Todos los estados</option>
              <option value="todo">üìù Por Hacer</option>
              <option value="in-progress">‚ö° En Progreso</option>
              <option value="preventivo">üîß Preventivo</option>
              <option value="stopped">‚õî Parado</option>
              <option value="done">‚úÖ Hecho</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Prioridad</label>
            <select id="priorityFilter" class="filter-select">
              <option value="">Todas las prioridades</option>
              <option value="high">üî¥ Alta</option>
              <option value="medium">üü° Media</option>
              <option value="low">üü¢ Baja</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label class="filter-label">Tipo</label>
            <select id="typeFilter" class="filter-select">
              <option value="">Todos los tipos</option>
              <option value="correctivo">üîß Correctivo</option>
              <option value="preventivo">üìÖ Preventivo</option>
              <option value="construccion">üèóÔ∏è Construcci√≥n</option>
            </select>
          </div>
          
          <div class="filter-group search-group">
            <label class="filter-label">Buscar</label>
            <div class="search-container">
              <span class="search-icon">üîç</span>
              <input type="text" id="searchInput" class="search-input" placeholder="Buscar √≥rdenes de trabajo...">
            </div>
          </div>
        </div>
      </div>
      
      <div class="actions-section">
        <button class="btn-primary" id="newOrderBtn">‚ûï Nueva Orden</button>
        <button class="btn-secondary" id="exportBtn">üì§ Exportar</button>
      </div>
    </div>

    <!-- Contenido principal -->
    <div class="content">
      <div class="table-row">
        <div class="panel">
          <div class="head">
            <div class="segmented">
              <button data-view="calendar">üìÖ Calendario</button>
              <button data-view="kanban">üìã Kanban</button>
              <button data-view="table">üìä Tabla</button>
            </div>
          </div>
          <div class="body">
            <!-- Vista de Calendario -->
            <div id="calendar-view" class="view-content" style="display:none;">
              <div class="calendar-container">
                <div class="calendar-header">
                  <button class="calendar-nav">‚Äπ</button>
                  <h3 id="currentMonth">Noviembre 2024</h3>
                  <button class="calendar-nav">‚Ä∫</button>
                </div>
                
                <div class="calendar-grid">
                  <div class="calendar-weekdays">
                    <div class="weekday">Lun</div>
                    <div class="weekday">Mar</div>
                    <div class="weekday">Mi√©</div>
                    <div class="weekday">Jue</div>
                    <div class="weekday">Vie</div>
                    <div class="weekday">S√°b</div>
                    <div class="weekday">Dom</div>
                  </div>
                  
                  <div class="calendar-days">
                    <!-- Los d√≠as se generan din√°micamente -->
                  </div>
                </div>
                
                <div class="calendar-legend">
                  <div class="legend-item">
                    <div class="legend-color correctivo"></div>
                    <span>Correctivo</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color preventivo"></div>
                    <span>Preventivo</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color construccion"></div>
                    <span>Construcci√≥n</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- TABLA -->
            <div id="table-view" style="display:none">
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th data-sort="dueDate">Fecha ‚¨ç</th>
                      <th data-sort="id">ID ‚¨ç</th>
                      <th data-sort="description">Descripci√≥n ‚¨ç</th>
                      <th data-sort="type">Tipo ‚¨ç</th>
                      <th data-sort="priority">Prioridad ‚¨ç</th>
                      <th data-sort="equipment">Equipo ‚¨ç</th>
                      <th data-sort="assignedTo">Asignado ‚¨ç</th>
                      <th data-sort="status">Estado ‚¨ç</th>
                    </tr>
                  </thead>
                  <tbody id="tableBody"></tbody>
                </table>
              </div>
            </div>

            <!-- KANBAN -->
            <div id="view-kanban" style="display:none">
              <div class="kanban-fullwidth">
                <div class="kcol" data-status="todo">
                  <div class="khead">üìù Por Hacer</div>
                  <div class="kbody" id="kb-todo"></div>
                </div>
                <div class="kcol" data-status="in-progress">
                  <div class="khead">‚ö° En Progreso</div>
                  <div class="kbody" id="kb-progress"></div>
                </div>
                <div class="kcol" data-status="done">
                  <div class="khead">‚úÖ Hechas</div>
                  <div class="kbody" id="kb-done"></div>
                </div>
                <div class="kcol" data-status="stopped">
                  <div class="khead">‚õî Paradas</div>
                  <div class="kbody" id="kb-stopped"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal Mejorado -->
  <div class="modal-overlay" id="modal">
    <div class="modal-dialog">
      <div class="modal-header">
        <div id="mTitle" class="modal-title">Detalle de Orden</div>
        <button class="modal-close" id="mClose">&times;</button>
      </div>
      <div class="modal-body">
        <div id="mContent" class="modal-content-wrapper"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="mSave">üíæ Guardar Cambios</button>
      </div>
    </div>
  </div>

  <script>
    // Cargar componente navbar
    fetch('components/navbar.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      })
      .catch(error => console.error('Error loading navbar:', error));
  </script>
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
</body>
</html>