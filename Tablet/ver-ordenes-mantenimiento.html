<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ver Ã“rdenes de Trabajo - GMAO</title>
    <link rel="stylesheet" href="ver-ordenes-mantenimiento.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="navbar-container"></div>

    <div class="container">
        <!-- Filtros simples -->
        <div class="filtros-container">
            <select id="filtroResponsable" onchange="filtrarOrdenes()">
                <option value="">Todos los tÃ©cnicos</option>
                <option value="Carlos MÃ©ndez">Carlos MÃ©ndez</option>
                <option value="Ana GarcÃ­a">Ana GarcÃ­a</option>
                <option value="Luis RodrÃ­guez">Luis RodrÃ­guez</option>
                <option value="MarÃ­a LÃ³pez">MarÃ­a LÃ³pez</option>
            </select>
            <select id="filtroPrioridad" onchange="filtrarOrdenes()">
                <option value="">Todas las prioridades</option>
                <option value="CrÃ­tica">ðŸ”´ CrÃ­tica</option>
                <option value="Alta">ðŸŸ  Alta</option>
                <option value="Media">ðŸŸ¡ Media</option>
                <option value="Baja">ðŸŸ¢ Baja</option>
            </select>
        </div>

        <!-- Kanban Board -->
        <div class="kanban-board">
            <!-- Columna Por Hacer -->
            <div class="kanban-column" data-estado="por-hacer">
                <div class="column-header por-hacer">
                    <h3><i class="fas fa-clock"></i> Por Hacer</h3>
                    <span class="counter" id="counter-por-hacer">0</span>
                </div>
                <div class="column-content" id="column-por-hacer">
                    <div class="orden-placeholder">
                        <i class="fas fa-clipboard-list"></i>
                        <p>No hay Ã³rdenes pendientes</p>
                    </div>
                </div>
            </div>

            <!-- Columna En Progreso -->
            <div class="kanban-column" data-estado="en-progreso">
                <div class="column-header en-progreso">
                    <h3><i class="fas fa-play"></i> En Progreso</h3>
                    <span class="counter" id="counter-en-progreso">0</span>
                </div>
                <div class="column-content" id="column-en-progreso">
                    <div class="orden-placeholder">
                        <i class="fas fa-wrench"></i>
                        <p>No hay Ã³rdenes en progreso</p>
                    </div>
                </div>
            </div>

            <!-- Columna Parado -->
            <div class="kanban-column" data-estado="parado">
                <div class="column-header parado">
                    <h3><i class="fas fa-pause"></i> Parado</h3>
                    <span class="counter" id="counter-parado">0</span>
                </div>
                <div class="column-content" id="column-parado">
                    <div class="orden-placeholder">
                        <i class="fas fa-hand-paper"></i>
                        <p>No hay Ã³rdenes paradas</p>
                    </div>
                </div>
            </div>

            <!-- Columna Hecho -->
            <div class="kanban-column" data-estado="hecho">
                <div class="column-header hecho">
                    <h3><i class="fas fa-check"></i> Hecho</h3>
                    <span class="counter" id="counter-hecho">0</span>
                </div>
                <div class="column-content" id="column-hecho">
                    <div class="orden-placeholder">
                        <i class="fas fa-check-circle"></i>
                        <p>No hay Ã³rdenes completadas</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para ver detalles de orden -->
    <div id="modal-detalle" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-titulo">Detalle de Orden de Trabajo</h2>
                <button class="modal-close" onclick="cerrarModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-contenido">
                <!-- Contenido se carga dinÃ¡micamente -->
            </div>
            <div class="modal-footer">
                <button class="btn-guardar" onclick="guardarCambios()">
                    <i class="fas fa-save"></i> Guardar Cambios
                </button>
                <button class="btn-cancelar" onclick="cerrarModal()">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <script src="ver-ordenes-mantenimiento.js"></script>
    <script>
        // Cargar navbar
        fetch('../Components/navbar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navbar-container').innerHTML = html;
                
                // Mostrar el botÃ³n volver despuÃ©s de cargar la navbar
                setTimeout(() => {
                    const btnVolver = document.getElementById('btn-volver-nav');
                    if (btnVolver) {
                        btnVolver.style.display = 'flex';
                    }
                }, 100);
            })
            .catch(error => {
                console.error('Error cargando navbar:', error);
            });
            
        // FunciÃ³n para volver atrÃ¡s
        function volverAtras() {
            window.history.back();
        }
    </script>
</body>
</html>